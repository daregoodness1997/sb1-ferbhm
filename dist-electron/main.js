"use strict";const{app:i,BrowserWindow:s,ipcMain:a}=require("electron"),l=require("path"),c=require("node-thermal-printer").printer,p=require("node-thermal-printer").types;function o(){const t=new s({width:800,height:600,webPreferences:{nodeIntegration:!0,contextIsolation:!1}});process.env.VITE_DEV_SERVER_URL?(t.loadURL(process.env.VITE_DEV_SERVER_URL),t.webContents.openDevTools()):t.loadFile(l.join(__dirname,"../dist/index.html"))}i.whenReady().then(o);i.on("window-all-closed",()=>{process.platform!=="darwin"&&i.quit()});i.on("activate",()=>{s.getAllWindows().length===0&&o()});a.handle("print-receipt",async(t,n)=>{try{let e=new c({type:p.EPSON,interface:"printer:auto"});return e.alignCenter(),e.println("My Store"),e.println("123 Main St, City, State 12345"),e.println("Tel: (123) 456-7890"),e.println("-----------------------------"),e.alignLeft(),n.items.forEach(r=>{e.tableCustom([{text:r.name,align:"LEFT",width:.5},{text:`${r.quantity}x`,align:"RIGHT",width:.2},{text:`$${r.price.toFixed(2)}`,align:"RIGHT",width:.3}])}),e.println("-----------------------------"),e.alignRight(),e.println(`TOTAL: $${n.total.toFixed(2)}`),e.println(`CASH: $${n.cash.toFixed(2)}`),e.println(`CHANGE: $${n.change.toFixed(2)}`),e.alignCenter(),e.println("Thank you for your purchase!"),e.cut(),await e.execute(),{success:!0,message:"Receipt printed successfully"}}catch(e){return{success:!1,message:e.message}}});
